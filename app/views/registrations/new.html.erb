<div class="align-self-center overflow-auto">
  <main class="container-xs text-white bg-dark text-center">
    <h5 class="fw-lighter fst-italic">Our Little Prince is on the Way!</h5>
    <hr/>
    <h1 class="display-3"><%=@invite.full_name.to_s%></h1>
    <h4 class="text-uppercase">You are invited to <%=@event.name%></h3>
    <p class="text-lowercase fw-lighter">that will be held on</p>
    <h5><%=@event.event_time.strftime("%A, %b. #{@event.event_time.day.ordinalize} %Y")%></h5>
    <h5><%=@event.event_time.strftime("%l:%M %P")%></h5>
    <p class="fw-lighter">
      <%=@event.location%><br/>
      <% if @event.address_1.present? %>
        <%=@event.address_1%><br/>
      <% end %>
      <%="#{@event.city}, #{@event.state} #{@event.zip}"%>
    </p>
    <h5>RSVP by <%=@event.rsvp_by.strftime("%b. #{@event.rsvp_by.day.ordinalize}")%></h5>
    <% @event.event_contacts.each do |contact| %>
      <p class="fw-lighter mb-0"><small><%=contact.name%>: <%=contact.phone_number%></small></p>
    <% end %>
    <hr/>
    <div class="container-xxs">
      <% if flash[:alert] %>
        <div class="alert alert-danger" role="alert"><%=flash[:alert]%></div>
      <% end %>

      <% if flash[:notice] %>
        <div class="alert alert-primary" role="alert"><%=flash[:notice]%></div>
      <% end %>

      <% if @invite.errors.any? %>
        <% @invite.errors.full_messages.each do |message| %>
          <div class="alert alert-danger" role="alert"><%= message %></div>
        <% end %>
      <% end %>

      <p class="lead">Register and RSVP online:</p>
      <%= form_with(model: @invite, url: signup_path(params[:code]), data: { turbo: false }) do |form| %>
        <div class="text-start">
          <div class="mb-2">
            <label for="rsvp_answer">Will be attending</label>

            <%= form.radio_button :rsvp_answer, "yes", class: "btn-check" %>
            <%= form.label :rsvp_answer_yes, "Yes", class: "btn btn-outline-success" %>

            <%= form.radio_button :rsvp_answer, "no", class: "btn-check" %>
            <%= form.label :rsvp_answer_no, "No", class: "btn btn-outline-danger" %>
          </div>

          <%= form.select :rsvp_count, [
            ["Number attending", ""],
            ["One guest", "1"],
            ["Two guests", "2"],
            ["Three guests", "3"],
            ["Four guests", "4"],
            ["Five guests", "5"],
            ["Six guests", "6"],
            ["Seven guests", "7"]
          ], {selected: @invite.rsvp_count.to_s}, class: "form-select mb-4" %>

          <%= form.fields_for :user do |user| %>
            <%= user.hidden_field :full_name %>

            <label for="email_input">Email address</label>
            <%= user.email_field :email_address, required: true, autocomplete: "email_address", placeholder: "Enter your email address", class: "form-control mb-2", id: "email_input" %>

            <label for="password_input">Password</label>
            <%= user.password_field :password, required: true, autocomplete: "password", placeholder: "Enter your password", maxlength: 72, class: "form-control mb-2", id: "password_input" %>

            <label for="password_confirm_input">Confirm password</label>
            <%= user.password_field :password_confirmation, required: true, autocomplete: "confirm-password", placeholder: "Confirm your password", maxlength: 72, class: "form-control mb-4", id: "password_confirm_input" %>
            <% end %>
        </div>

        <button class="w-100 btn btn-lg btn-primary" type="submit">RSVP</button>
      <% end %>
    </div>
    <hr/>
    <p class="fw-lighter mx-auto" style="max-width:28rem;">We will be hosting a diaper raffle for those who wish to participate for a chance to win a prize!</p>
    <% if @event.event_registries.length > 0 %>
      <p class="fw-lighter mx-auto" style="max-width:28rem;">
        We are registered at

        <% @event.event_registries.each_with_index do |er, idx| %>
          <%=link_to er.name, er.link%><%=
            if @event.event_registries.length <= 2 && idx < @event.event_registries.length - 1
              " & "
            elsif @event.event_registries.length > 2
              if idx < @event.event_registries.length - 2
                ", "
              elsif idx < @event.event_registries.length - 1
                " & "
              end
            end
          %><% end %>, if you wish to browse our wish list.
      </p>
    <% end %>
  </main>
</div>
