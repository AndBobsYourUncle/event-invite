<div class="align-self-center overflow-auto">
  <main class="container-xs text-white bg-dark text-center">
    <h5 class="fw-lighter fst-italic">Our Little Prince is on the Way!</h5>
    <hr/>
    <h1 class="display-3"><%=@invite.full_name.to_s%></h1>
    <h4 class="text-uppercase">You are invited to <%=@event.name%></h3>
    <p class="text-lowercase fw-lighter">that will be held on</p>
    <h5><%=@event.event_time.strftime("%A, %b. #{@event.event_time.day.ordinalize} %Y")%></h5>
    <h5><%=@event.event_time.strftime("%l:%M %P")%></h5>
    <p class="fw-lighter">
      <%=@event.location%><br/>
      <% if @event.address_1.present? %>
        <%=@event.address_1%><br/>
      <% end %>
      <%="#{@event.city}, #{@event.state} #{@event.zip}"%>
    </p>
    <h5>RSVP by <%=@event.rsvp_by.strftime("%b. #{@event.rsvp_by.day.ordinalize}")%></h5>
    <% @event.event_contacts.each do |contact| %>
      <p class="fw-lighter mb-0"><small><%=contact.name%>: <%=contact.phone_number%></small></p>
    <% end %>
    <hr/>
    <div class="container-xxs">
      <% if flash[:alert] %>
        <div class="alert alert-danger" role="alert"><%=flash[:alert]%></div>
      <% end %>

      <% if flash[:notice] %>
        <div class="alert alert-primary" role="alert"><%=flash[:notice]%></div>
      <% end %>

      <% if @user.errors.any? %>
        <% @user.errors.full_messages.each do |message| %>
          <div class="alert alert-danger" role="alert"><%= message %></div>
        <% end %>
      <% end %>

      <p class="lead">Register and RSVP online:</p>
      <%= form_with(model: @user, url: signup_path(params[:code]), data: { turbo: false }) do |form| %>
        <div class="text-start">
          <label for="email_input">Email address</label>
          <%= form.email_field :email_address, required: true, autofocus: !@user.email_address.present?, autocomplete: "username", placeholder: "Enter your email address", value: @user.email_address, class: "form-control mb-2", id: "email_input" %>

          <label for="password_input">Password</label>
          <%= form.password_field :password, required: true, autofocus: @user.email_address.present?, autocomplete: "current-password", placeholder: "Enter your password", maxlength: 72, class: "form-control mb-2", id: "password_input" %>

          <label for="password_confirm_input">Confirm password</label>
          <%= form.password_field :password_confirmation, required: true, autocomplete: "confirm-password", placeholder: "Confirm your password", maxlength: 72, class: "form-control mb-4", id: "password_confirm_input" %>
        </div>

        <button class="w-100 btn btn-lg btn-primary" type="submit">RSVP</button>
      <% end %>
    </div>
    <hr/>
    <p class="fw-lighter mx-auto" style="max-width:28rem;">We will be hosting a diaper raffle for those who wish to participate for a chance to win a prize!</p>
    <% if @event.event_registries.length > 0 %>
      <p class="fw-lighter mx-auto" style="max-width:28rem;">
        We are registered at

        <% @event.event_registries.each_with_index do |er, idx| %>
          <%=link_to er.name, er.link%><%=
            if @event.event_registries.length <= 2 && idx < @event.event_registries.length - 1
              " & "
            elsif @event.event_registries.length > 2
              if idx < @event.event_registries.length - 2
                ", "
              elsif idx < @event.event_registries.length - 1
                " & "
              end
            end
          %><% end %>, if you wish to browse our wish list.
      </p>
    <% end %>
  </main>
</div>

<!--
<div class="align-self-center">
  <main class="container-xs text-white bg-dark text-center">
    <% if flash[:alert] %>
      <div class="alert alert-danger" role="alert"><%=flash[:alert]%></div>
    <% end %>

    <% if flash[:notice] %>
      <div class="alert alert-primary" role="alert"><%=flash[:notice]%></div>
    <% end %>

    <% if @user.errors.any? %>
      <% @user.errors.full_messages.each do |message| %>
        <div class="alert alert-danger" role="alert"><%= message %></div>
      <% end %>
    <% end %>

    <%= form_with(model: @user, url: signup_path(params[:code]), data: { turbo: false }) do |form| %>
      <p class="lead">Please RSVP!</p>

      <div class="form-floating">
        <%= form.email_field :email_address, required: true, autofocus: !@user.email_address.present?, autocomplete: "username", placeholder: "Enter your email address", value: @user.email_address, class: "form-control", id: "email_input" %>
        <label for="email_input">Email address</label>
      </div>
      <div class="form-floating">
        <%= form.password_field :password, required: true, autofocus: @user.email_address.present?, autocomplete: "current-password", placeholder: "Enter your password", maxlength: 72, class: "form-control", id: "password_input" %>
        <label for="password_input">Password</label>
      </div>
      <div class="form-floating">
        <%= form.password_field :password_confirmation, required: true, autocomplete: "confirm-password", placeholder: "Confirm your password", maxlength: 72, class: "form-control mb-2", id: "password_confirm_input" %>
        <label for="password_confirm_input">Confirm password</label>
      </div>
      <button class="w-100 btn btn-lg btn-primary" type="submit">Sign in</button>
    <% end %>
  </main>
</div>
-->
